{% extends 'base.html' %}

{% block title %}{{ action }} User{% endblock %}

{% block content %}
<div class="form-container" style="max-width: 600px; margin: 20px auto;">
    <h2>{{ action }} User</h2>
    <form method="post">
        <div>
            <label for="username">Username</label>
            <input type="text" name="username" id="username" value="{{ user.username if user else '' }}"
                   {{ 'readonly' if action == 'Update' else 'required' }}>
            {% if action == 'Update' %}
                <small>Username cannot be changed after creation through this form.</small>
            {% endif %}
        </div>
        <div>
            <label for="password">Password</label>
            <input type="password" name="password" id="password" {{ 'required' if action == 'Create' else '' }}>
            {% if action == 'Update' %}<small>Leave blank to keep current password.</small>{% endif %}
        </div>
        <div>
            <label for="is_admin">
                <input type="checkbox" name="is_admin" id="is_admin" {{ 'checked' if user and user.is_admin }}>
                Is Admin?
            </label>
        </div>
        <div>
            <input type="submit" value="{{ action }} User">
        </div>
    </form>
    <p><a href="{{ url_for('dashboard') }}" class="subtle-link">Back to Admin Dashboard</a></p>
</div>
{% endblock %}